"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[4110],{96444:function(e,t,n){var a=n(66252),s=n(24150);class i{async getAllFriends(e){try{const t=await s.hi.get(`friends/user/${e}`);return t.data.data}catch(t){(0,a.S3)(t)}}async getFriendsRequests(){try{const e=await s.hi.get("/friends/un-accepted");return e.data.data}catch(e){(0,a.S3)(e)}}async create(e){try{return await s.hi.post("/friends/create",{friend_id:e})}catch(t){(0,a.S3)(t)}}async getFriendshipById(e){try{const t=await s.hi.post("/friends/show",{friendship_id:e});return t.data}catch(t){(0,a.S3)(t)}}async accept(e){try{const t=await s.hi.get(`/friends/accept/${e}`);return t.data}catch(t){(0,a.S3)(t)}}async delete(e,t){const n=new FormData;n.append("user_id",e),n.append("friend_id",t);try{const e=await s.hi.post("/friends/delete",n);return e.data}catch(i){(0,a.S3)(i)}}}t["Z"]=new i},6340:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var a=n(66252),s=n(3577),i=n.p+"img/no-friend-req.36ea3495.png";const r={class:"row"},o={class:"col-sm-12"},l=(0,a._)("h4",{class:"card-title"},"طلبات الصداقة",-1),c={key:0,class:"request-request request-inline m-0 p-0"},d={class:"flex-grow-1 ms-3"},u={class:"d-flex align-items-center mt-2 mt-md-0"},m={class:"confirm-click-btn"},p=["onClick"],_=(0,a._)("span",{class:"material-symbols-outlined md-18 me-1"}," person_add ",-1),h=(0,a._)("a",{href:"@/app/profile.html",class:"me-3 btn btn-primary rounded request-btn",style:{display:"none"}},null,-1),f=["onClick"],g={key:0,class:"d-block text-center mb-0 pb-0"},b={key:1,class:"col-sm-12"},w=(0,a._)("div",{class:"iq-card-body p-0"},[(0,a._)("div",{class:"image-block text-center"},[(0,a._)("img",{src:i,class:"img-fluid rounded w-50",alt:"blog-img"})]),(0,a._)("h4",{class:"text-center mt-3 mb-3"},"لا يوجد طلبات صداقة")],-1);function y(e,t,n,i,y,q){const C=(0,a.up)("BaseAvatar"),k=(0,a.up)("router-link"),x=(0,a.up)("iq-card");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("div",o,[(0,a.Wm)(x,null,{headerTitle:(0,a.w5)((()=>[l])),body:(0,a.w5)((()=>[q.requestsLoaded.length>0?((0,a.wg)(),(0,a.iD)("ul",c,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(q.requestsLoaded,((e,t)=>((0,a.wg)(),(0,a.iD)("li",{class:"d-flex align-items-center justify-content-between flex-wrap",key:t},[(0,a.Wm)(C,{profileImg:e.user.user_profile.profile_picture,profile_id:e.user.user_profile.id,title:e.user.name,gender:e.user.gender,avatarClass:"rounded-circle avatar-40",containerClass:"flex-shrink-0"},null,8,["profileImg","profile_id","title","gender"]),(0,a._)("div",d,[(0,a.Wm)(k,{to:{name:"user.profile",params:{user_id:e.user.id}}},{default:(0,a.w5)((()=>[(0,a._)("h6",null,(0,s.zw)(e.user.name),1)])),_:2},1032,["to"])]),(0,a._)("div",u,[(0,a._)("div",m,[(0,a._)("a",{role:"button",class:"me-3 btn btn-primary rounde d-flex align-items-center",onClick:t=>q.acceptrequest(e.id)},[_,(0,a.Uk)(" قبول ")],8,p),h]),(0,a._)("a",{role:"button",class:"btn btn-secondary rounded","data-extra-toggle":"delete","data-closest-elem":".item",onClick:t=>q.deleterequest(e.user_id,e.friend_id)},"حذف",8,f)])])))),128)),y.friendRequest.length>y.length?((0,a.wg)(),(0,a.iD)("li",g,[(0,a._)("a",{class:"me-3 btn",role:"button",onClick:t[0]||(t[0]=e=>q.loadMore())},"عرض المزيد")])):(0,a.kq)("",!0)])):((0,a.wg)(),(0,a.iD)("div",b,[(0,a.Wm)(x,{class:"iq-card"},{default:(0,a.w5)((()=>[w])),_:1})]))])),_:1})])])}var q=n(96444),C={name:"FriendRequest",async created(){this.friendRequest=await q.Z.getFriendsRequests()},data(){return{friendRequest:[],length:10}},methods:{acceptrequest(e){const t=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1});t.fire({title:"هل أنت متأكد؟",text:"لا يمكنك التراجع عن هذا الاجراء",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم، قم بالقبول",cancelButtonText:"تراجع  ",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((n=>{n.isConfirmed&&q.Z.accept(e).then((e=>{t.fire({title:"تم القبول",text:"تم قبول طلب الصداقة",icon:"success",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}),setTimeout((function(){location.reload(!0)}),2e3)})).catch((e=>{console.log(e)}))}))},deleterequest(e,t){const n=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1});n.fire({title:"هل أنت متأكد؟",text:"لا يمكنك التراجع عن هذا الاجراء",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم، قم بالحذف",cancelButtonText:"تراجع  ",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((a=>{a.isConfirmed&&q.Z["delete"](e,t).then((e=>{n.fire({title:"تم الحذف",text:"تم حذف طلب الصداقة",icon:"success",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}),setTimeout((function(){location.reload(!0)}),2e3)})).catch((e=>{console.log(e)}))}))},loadMore(){this.length>this.friendRequest.length||(this.length=this.length+10)}},computed:{requestsLoaded(){return this.friendRequest.slice(0,this.length)}}},k=n(83744);const x=(0,k.Z)(C,[["render",y]]);var v=x}}]);
//# sourceMappingURL=4110.fa259e20.js.map
{"version":3,"file":"js/6912.af28cea2.js","mappings":"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","sources":["webpack://Osboha180/./src/API/services/auth.service.js","webpack://Osboha180/./src/views/AuthPages/Default/AssignRole.vue","webpack://Osboha180/./src/views/AuthPages/Default/AssignRole.vue?b356"],"sourcesContent":["import { api } from \"../Intercepter\";\r\nimport UserInfo from \"../../Services/userInfoService\";\r\nimport { handleError } from \"vue\";\r\n\r\nclass AuthService {\r\n  async login({ username, password }) {\r\n    try {\r\n      const response = api.post(\"/auth/signin\", {\r\n        username,\r\n        password,\r\n      });\r\n\r\n      if (response.data.accessToken) {\r\n        UserInfo.setUser(response.date);\r\n      }\r\n      return response.data;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  async assignRole(formData) {\r\n    try {\r\n      const response = await api.post(\"assign-role\", formData);\r\n      return response.data.data;\r\n    } catch (error) {\r\n      return error.response;\r\n    }\r\n  }\r\n\r\n  logout() {\r\n    UserInfo.removeUser();\r\n  }\r\n\r\n  async register(name, gender, email, phone, password, user_type) {\r\n    return await api.post(\"/register\", {\r\n      name,\r\n      gender,\r\n      email,\r\n      phone,\r\n      password,\r\n      user_type,\r\n    });\r\n  }\r\n\r\n  async sendEmail() {\r\n    let error = null;\r\n    const res = await api\r\n      .post(\"email/verification-notification\")\r\n      .catch((error) => {\r\n        error = error.response.data.message;\r\n        error;\r\n      });\r\n    return { data: res.data, error };\r\n  }\r\n\r\n  async resetPassword(password, email, token) {\r\n    let resetData = new FormData();\r\n    resetData.append(\"password\", password);\r\n    resetData.append(\"email\", email);\r\n    resetData.append(\"token\", token);\r\n    try {\r\n      const response = await api.post(\"password/reset\", resetData);\r\n      return response.data;\r\n    } catch (error) {\r\n      return error.response;\r\n    }\r\n  }\r\n  async forgetPassword(email) {\r\n    try {\r\n      const response = await api.post(\"password/forgot-password\", {\r\n        email: email,\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      return error.response;\r\n    }\r\n  }\r\n  async sessionData() {\r\n    try {\r\n      const response = await api.get(\"session-data\");\r\n      return response.data.data;\r\n    } catch (error) {\r\n      handleError(error);\r\n    }\r\n  }\r\n\r\n  async refreshToken() {\r\n    try {\r\n      const response = await api.post(\"/refresh\");\r\n      return response.data.data;\r\n    } catch (error) {\r\n      handleError(error);\r\n    }\r\n  }\r\n}\r\n\r\nexport default new AuthService();\r\n","<template>\r\n  <div class=\"col-sm-12 mt-3\">\r\n    <iq-card class=\"iq-card\">\r\n      <div\r\n        class=\"iq-card-header-toolbar d-flex text-center align-items-center mx-auto\"\r\n      >\r\n        <h1 class=\"text-center mt-3 mb-3\">ترقية</h1>\r\n      </div>\r\n      <div class=\"iq-card-body p-4\">\r\n        <div class=\"image-block text-center\">\r\n          <img\r\n            src=\"@/assets/images/main/upgrade-user.png\"\r\n            class=\"img-fluid rounded w-75\"\r\n            alt=\"blog-img\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 bg-white pt-2\">\r\n        <div class=\"sign-in-from\">\r\n          <form class=\"mt-2\" @submit.prevent=\"onSubmit()\">\r\n            <div class=\"form-group\">\r\n              <label for=\"user\">المستخدم</label>\r\n              <input\r\n                v-model=\"v$.form.user.$model\"\r\n                type=\"email\"\r\n                class=\"form-control mb-0\"\r\n                id=\"user\"\r\n                placeholder=\"ادخل بريد المستخدم\"\r\n              />\r\n              <template v-if=\"v$.form.user.$error\">\r\n                <small style=\"color: red\" v-if=\"v$.form.user.required.$invalid\"\r\n                  >البريد الالكتروني للمستخدم مطلوب</small\r\n                >\r\n                <small style=\"color: red\" v-if=\"v$.form.user.email.$invalid\"\r\n                  >البريد الالكتروني للمستخدم غير صحيح</small\r\n                >\r\n              </template>\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"head_user\"> المسؤول عنه</label>\r\n              <input\r\n                v-model=\"v$.form.head_user.$model\"\r\n                type=\"email\"\r\n                class=\"form-control mb-0\"\r\n                id=\"head_user\"\r\n                placeholder=\"ادخل بريد المسؤول عنه\"\r\n              />\r\n              <template v-if=\"v$.form.head_user.$error\">\r\n                <small\r\n                  style=\"color: red\"\r\n                  v-if=\"v$.form.head_user.required.$invalid\"\r\n                >\r\n                  البريد الالكتروني للمسؤول مطلوب</small\r\n                >\r\n                <small\r\n                  style=\"color: red\"\r\n                  v-if=\"v$.form.head_user.email.$invalid\"\r\n                >\r\n                  البريد الالكتروني للمسؤول غير صحيح</small\r\n                >\r\n              </template>\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"role\">الترقية</label>\r\n              <select\r\n                v-model=\"v$.form.role_id.$model\"\r\n                class=\"form-select\"\r\n                data-trigger\r\n                name=\"role\"\r\n                id=\"role\"\r\n              >\r\n                <option value=\"0\" selected>ترقية إلى</option>\r\n                <option\r\n                  v-for=\"(role, index) in roles\"\r\n                  :key=\"index\"\r\n                  :value=\"role.id\"\r\n                >\r\n                  {{ user_type[role.name] }}\r\n                </option>\r\n              </select>\r\n              <small style=\"color: red\" v-if=\"v$.form.role_id.$error\">\r\n                يرجى اختيار نوع الترقية\r\n              </small>\r\n            </div>\r\n\r\n            <div class=\"form-group text-center\" v-if=\"message\">\r\n              <small style=\"color: red\">\r\n                {{ message }}\r\n              </small>\r\n            </div>\r\n            <div class=\"col-sm-12 text-center\" v-if=\"loader\">\r\n              <p class=\"text-center\">جاري الترقية</p>\r\n              <img\r\n                src=\"@/assets/images/page-img/page-load-loader.gif\"\r\n                alt=\"loader\"\r\n                style=\"height: 100px\"\r\n              />\r\n            </div>\r\n            <div class=\"d-inline-block w-100\" v-else>\r\n              <button\r\n                type=\"submit\"\r\n                class=\"btn btn-primary float-end\"\r\n                :disabled=\"loader\"\r\n              >\r\n                ترقية\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </iq-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport useVuelidate from \"@vuelidate/core\";\r\nimport { required, email, maxLength } from \"@vuelidate/validators\";\r\nimport { api } from \"@/API/Intercepter\";\r\nimport authService from \"@/API/services/auth.service\";\r\nconst greaterThanZero = (value) => value > 0;\r\n\r\nexport default {\r\n  name: \"AssignRole\",\r\n  setup() {\r\n    return { v$: useVuelidate() };\r\n  },\r\n  async created() {\r\n    const roles = await api.get(`get-roles/1`);\r\n    this.roles = roles.data.data;\r\n  },\r\n  data() {\r\n    return {\r\n      loader: false,\r\n      user_type: {\r\n        ambassador: \"سفير\",\r\n        leader: \"قائد\",\r\n        supervisor: \"مراقب\",\r\n        advisor: \"موجه\",\r\n        consultant: \"مستشار\",\r\n        admin: \"ادارة\",\r\n      },\r\n      form: {\r\n        user: \"\",\r\n        head_user: \"\",\r\n        role_id: 0,\r\n      },\r\n      roles: [],\r\n      message: \"\",\r\n    };\r\n  },\r\n  validations() {\r\n    return {\r\n      form: {\r\n        user: { required, email },\r\n        head_user: { required, email },\r\n        role_id: {\r\n          required,\r\n          maxValue: greaterThanZero,\r\n        },\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    async onSubmit() {\r\n      this.v$.$validate();\r\n      if (!this.v$.$error) {\r\n        this.loader = true;\r\n        try {\r\n          this.message = \"\";\r\n          const response = await authService.assignRole(this.form);\r\n          this.message = response;\r\n\r\n          this.v$.form.$reset();\r\n          this.form = {\r\n            user: \"\",\r\n            head_user: \"\",\r\n            role_id: 0,\r\n          };\r\n\r\n          setTimeout(() => {\r\n            this.message = \"\";\r\n          }, 1800);\r\n        } catch (error) {\r\n          this.message = \"حدث خطأ, يرجى المحاولة لاحقاً\";\r\n        } finally {\r\n          this.loader = false;\r\n        }\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./AssignRole.vue?vue&type=template&id=63689f20\"\nimport script from \"./AssignRole.vue?vue&type=script&lang=js\"\nexport * from \"./AssignRole.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Asmaa\\\\osboha\\\\Osboha2022-frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["AuthService","async","username","password","response","api","data","accessToken","UserInfo","date","error","console","log","formData","logout","name","gender","email","phone","user_type","res","catch","message","token","resetData","FormData","append","handleError","class","_createElementVNode","src","_imports_0","alt","for","style","value","selected","_imports_1","_hoisted_22","_hoisted_23","_createElementBlock","_hoisted_1","_createVNode","_component_iq_card","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","onSubmit","_cache","_withModifiers","$event","$options","_hoisted_6","_hoisted_7","$setup","v$","form","user","$model","type","id","placeholder","$error","_Fragment","key","required","$invalid","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","head_user","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","role_id","_hoisted_16","_renderList","$data","roles","role","index","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_toDisplayString","loader","_hoisted_21","_hoisted_24","_hoisted_25","disabled","_hoisted_26","greaterThanZero","setup","useVuelidate","this","ambassador","leader","supervisor","advisor","consultant","admin","validations","maxValue","methods","$validate","authService","$reset","setTimeout","__exports__","render"],"sourceRoot":""}
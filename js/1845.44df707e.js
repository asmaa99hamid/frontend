(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[1845],{20425:function(e){!function(t,n){e.exports=n()}(0,(function(){var e="__v-click-outside",t="undefined"!=typeof window,n="undefined"!=typeof navigator,i=t&&("ontouchstart"in window||n&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],a=function(e){var t=e.event,n=e.handler;(0,e.middleware)(t)&&n(t)},r=function(t,n){var r=function(e){var t="function"==typeof e;if(!t&&"object"!=typeof e)throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||function(e){return e},events:e.events||i,isActive:!(!1===e.isActive),detectIframe:!(!1===e.detectIframe),capture:Boolean(e.capture)}}(n.value),s=r.handler,o=r.middleware,d=r.detectIframe,c=r.capture;if(r.isActive){if(t[e]=r.events.map((function(e){return{event:e,srcTarget:document.documentElement,handler:function(e){return function(e){var t=e.el,n=e.event,i=e.handler,r=e.middleware,s=n.path||n.composedPath&&n.composedPath();(s?s.indexOf(t)<0:!t.contains(n.target))&&a({event:n,handler:i,middleware:r})}({el:t,event:e,handler:s,middleware:o})},capture:c}})),d){var l={event:"blur",srcTarget:window,handler:function(e){return function(e){var t=e.el,n=e.event,i=e.handler,r=e.middleware;setTimeout((function(){var e=document.activeElement;e&&"IFRAME"===e.tagName&&!t.contains(e)&&a({event:n,handler:i,middleware:r})}),0)}({el:t,event:e,handler:s,middleware:o})},capture:c};t[e]=[].concat(t[e],[l])}t[e].forEach((function(n){var i=n.event,a=n.srcTarget,r=n.handler;return setTimeout((function(){t[e]&&a.addEventListener(i,r,c)}),0)}))}},s=function(t){(t[e]||[]).forEach((function(e){return e.srcTarget.removeEventListener(e.event,e.handler,e.capture)})),delete t[e]},o=t?{beforeMount:r,updated:function(e,t){var n=t.value,i=t.oldValue;JSON.stringify(n)!==JSON.stringify(i)&&(s(e),r(e,{value:n}))},unmounted:s}:{};return{install:function(e){e.directive("click-outside",o)},directive:o}}))},96444:function(e,t,n){"use strict";var i=n(66252),a=n(24150);class r{async getAllFriends(e){try{const t=await a.hi.get(`friends/user/${e}`);return t.data.data}catch(t){(0,i.S3)(t)}}async getFriendsRequests(){try{const e=await a.hi.get("/friends/un-accepted");return e.data.data}catch(e){(0,i.S3)(e)}}async create(e){try{return await a.hi.post("/friends/create",{friend_id:e})}catch(t){(0,i.S3)(t)}}async getFriendshipById(e){try{const t=await a.hi.post("/friends/show",{friendship_id:e});return t.data}catch(t){(0,i.S3)(t)}}async accept(e){try{const t=await a.hi.get(`/friends/accept/${e}`);return t.data}catch(t){(0,i.S3)(t)}}async delete(e,t){const n=new FormData;n.append("user_id",e),n.append("friend_id",t);try{const e=await a.hi.post("/friends/delete",n);return e.data}catch(r){(0,i.S3)(r)}}}t["Z"]=new r},61845:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var i=n(66252),a=n(3577),r=n(76560);const s={class:"row"},o=(0,i._)("h4",{class:"card-title"},"قائمة الأصدقاء",-1),d={key:0,class:"request-list list-inline m-0 p-0"},c={class:"flex-grow-1 ms-3"},l={class:"d-flex justify-content-end flex-grow-1 ms-3"},u=["onClick"],m=(0,i._)("a",{class:"dropdown-item d-flex align-items-center"},[(0,i._)("span",{class:"material-symbols-outlined me-2 md-18"}," person "),(0,i.Uk)(" الملف الشخصي ")],-1),h=["onClick"],f=(0,i._)("span",{class:"material-symbols-outlined me-2 md-18"}," person_remove ",-1),p=["onClick"],w=(0,i._)("span",{class:"material-symbols-outlined me-2 md-18"}," person_remove ",-1),g=["onClick"],_=(0,i._)("span",{class:"material-symbols-outlined me-2 md-18"}," group_add ",-1),v={key:0,class:"d-block text-center mb-0 pb-0"},y={key:1,class:"col-sm-12"},k=(0,i._)("div",{class:"iq-card-body p-0"},[(0,i._)("div",{class:"image-block text-center"},[(0,i._)("img",{src:r,class:"img-fluid rounded w-50",alt:"blog-img"})]),(0,i._)("h4",{class:"text-center mt-3 mb-3"},"لا يوجد أصدقاء")],-1);function b(e,t,n,r,b,C){const x=(0,i.up)("BaseAvatar"),O=(0,i.up)("router-link"),F=(0,i.up)("iq-card"),A=(0,i.Q2)("click-outside");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(F,null,{headerTitle:(0,i.w5)((()=>[o])),body:(0,i.w5)((()=>[C.friendsLoaded.length>0?(0,i.wy)(((0,i.wg)(),(0,i.iD)("ul",d,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(C.friendsLoaded,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{class:"d-flex align-items-center justify-content-between flex-wrap",key:t},[(0,i.Wm)(x,{profileImg:e.profile.profile_picture,profile_id:e.profile.id,title:e.name,gender:e.gender,avatarClass:"rounded-circle avatar-40",containerClass:"flex-shrink-0"},null,8,["profileImg","profile_id","title","gender"]),(0,i._)("div",c,[(0,i._)("h5",null,(0,a.zw)(e.name),1)]),(0,i._)("div",l,[(0,i._)("span",{role:"button",onClick:e=>C.showList(t),class:"material-symbols-outlined"}," more_horiz ",8,u),(0,i._)("div",{class:(0,a.C_)("dropdown-menu dropdown-menu-right "+(b.controlList[t]?"show":"")),"aria-labelledby":"dropdownMenuButton"},[(0,i.Wm)(O,{to:{name:"user.profile",params:{user_id:e.id}}},{default:(0,i.w5)((()=>[m])),_:2},1032,["to"]),b.user_id==C.auth.id?((0,i.wg)(),(0,i.iD)("a",{key:0,class:"dropdown-item d-flex align-items-center",onClick:t=>C.deleteFriendship(C.auth.id,e.id)},[f,(0,i.Uk)(" الغاء الصداقة ")],8,h)):C.checkNotFriendsOfAuth(e.id)?((0,i.wg)(),(0,i.iD)("a",{key:1,class:"dropdown-item d-flex align-items-center",onClick:t=>C.createFriendship(e.id)},[w,(0,i.Uk)(" الغاء طلب الصداقة ")],8,p)):C.checkFriendsOfAuth(e.id)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("a",{key:2,class:"dropdown-item d-flex align-items-center",onClick:t=>C.createFriendship(e.id)},[_,(0,i.Uk)(" اضافة ")],8,g))],2)])])))),128)),b.friends.length>b.length?((0,i.wg)(),(0,i.iD)("li",v,[(0,i._)("a",{class:"me-3 btn",role:"button",onClick:t[0]||(t[0]=e=>C.loadMore())},"عرض المزيد")])):(0,i.kq)("",!0)])),[[A,C.onClickOutside]]):((0,i.wg)(),(0,i.iD)("div",y,[(0,i.Wm)(F,{class:"iq-card"},{default:(0,i.w5)((()=>[k])),_:1})]))])),_:1})])}n(57658);var C=n(96444),x=n(20425),O=n.n(x),F={name:"FriendList",async created(){const e=await C.Z.getAllFriends(this.user_id);this.friends=e.allFriends,this.friendsOfAuth=e.friendsOfAuth,this.notFriendsOfAuth=e.notFriendsOfAuth},directives:{clickOutside:O().directive},data(){return{controlList:[],friends:[],friendsOfAuth:[],notFriendsOfAuth:[],length:10,user_id:this.$route.params.user_id}},methods:{showList(e){this.controlList.fill(!1),this.controlList[e]=!0},onClickOutside(){this.controlList.fill(!1)},deleteFriendship(e,t){const n=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1});n.fire({title:"هل أنت متأكد؟",text:"لا يمكنك التراجع عن هذا الاجراء",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم، قم بالحذف",cancelButtonText:"تراجع  ",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((i=>{i.isConfirmed&&C.Z["delete"](e,t).then((e=>{n.fire({title:"تم الحذف",text:"تم حذف طلب الصداقة",icon:"success",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}),setTimeout((function(){location.reload(!0)}),2e3)})).catch((e=>{console.log(e)}))}))},async createFriendship(e){try{await C.Z.create(e);this.notFriendsOfAuth.push(e);const t=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg"},buttonsStyling:!1});t.fire({title:"تم الارسال",text:"تم ارسال طلب الصداقة",icon:"success",confirmButtonText:"حسنا",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}})}catch(t){console.log(t)}},loadMore(){this.length>this.friends.length||(this.length=this.length+10)},checkFriendsOfAuth(e){return this.friendsOfAuth.includes(e)},checkNotFriendsOfAuth(e){return this.notFriendsOfAuth.includes(e)}},computed:{friendsLoaded(){return this.friends.slice(0,this.length)},auth(){return this.$store.getters.getUser}}},A=n(83744);const L=(0,A.Z)(F,[["render",b]]);var B=L},76560:function(e,t,n){"use strict";e.exports=n.p+"img/no-friends.2bab3c44.png"}}]);
//# sourceMappingURL=1845.44df707e.js.map
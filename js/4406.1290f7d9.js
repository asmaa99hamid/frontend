(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[4406],{20425:function(e){!function(t,a){e.exports=a()}(0,(function(){var e="__v-click-outside",t="undefined"!=typeof window,a="undefined"!=typeof navigator,r=t&&("ontouchstart"in window||a&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],s=function(e){var t=e.event,a=e.handler;(0,e.middleware)(t)&&a(t)},i=function(t,a){var i=function(e){var t="function"==typeof e;if(!t&&"object"!=typeof e)throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||function(e){return e},events:e.events||r,isActive:!(!1===e.isActive),detectIframe:!(!1===e.detectIframe),capture:Boolean(e.capture)}}(a.value),o=i.handler,n=i.middleware,d=i.detectIframe,u=i.capture;if(i.isActive){if(t[e]=i.events.map((function(e){return{event:e,srcTarget:document.documentElement,handler:function(e){return function(e){var t=e.el,a=e.event,r=e.handler,i=e.middleware,o=a.path||a.composedPath&&a.composedPath();(o?o.indexOf(t)<0:!t.contains(a.target))&&s({event:a,handler:r,middleware:i})}({el:t,event:e,handler:o,middleware:n})},capture:u}})),d){var c={event:"blur",srcTarget:window,handler:function(e){return function(e){var t=e.el,a=e.event,r=e.handler,i=e.middleware;setTimeout((function(){var e=document.activeElement;e&&"IFRAME"===e.tagName&&!t.contains(e)&&s({event:a,handler:r,middleware:i})}),0)}({el:t,event:e,handler:o,middleware:n})},capture:u};t[e]=[].concat(t[e],[c])}t[e].forEach((function(a){var r=a.event,s=a.srcTarget,i=a.handler;return setTimeout((function(){t[e]&&s.addEventListener(r,i,u)}),0)}))}},o=function(t){(t[e]||[]).forEach((function(e){return e.srcTarget.removeEventListener(e.event,e.handler,e.capture)})),delete t[e]},n=t?{beforeMount:i,updated:function(e,t){var a=t.value,r=t.oldValue;JSON.stringify(a)!==JSON.stringify(r)&&(o(e),i(e,{value:a}))},unmounted:o}:{};return{install:function(e){e.directive("click-outside",n)},directive:n}}))},22658:function(e,t,a){"use strict";var r=a(66252),s=a(24150),i=a(79940);class o{async createGroup(e){try{const t=await s.hi.post("/group/create",e,{headers:{"Content-type":"multipart/form-data"}});return t.data.data}catch(t){(0,r.S3)(t)}}async getAll(){try{const e=await s.hi.get("/group");return await e.data}catch(e){return e}}async getById(e){try{const t=await s.hi.get(`group/show/${e}`);return t.data.data}catch(t){return t}}async getBooks(e){try{const t=await s.hi.get(`group/books/${e}`);return t.data.data}catch(t){(0,r.S3)(t)}}async getAllGroupExceptions(e){try{const t=await s.hi.get(`group/group-exceptions/${e}`);return t.data.data}catch(t){return t}}async exceptionsFilter(e,t){try{const a=await s.hi.get(`group/exceptions-filter/${e}/${t}`);return a.data.data}catch(a){return a}}async BasicMarksView(e){try{const t=await s.hi.get(`group/basic-mark-view/${e}`);return t.data.data}catch(t){return t}}async AllAchievements(e,t){try{const a=await s.hi.get(`group/all-achievements/${e}/${t}`);return a.data.data}catch(a){return a}}async AchievementAsPages(e,t){try{const a=await s.hi.get(`group/achievement-as-pages/${e}/${t}`);return a.data.data}catch(a){return a}}async searchForAmbassadorAchievement(e,t,a){try{const r=await s.hi.get(`group/search-for-ambassador-achievement/${e}/${t}/${a}`);return r.data.data}catch(r){return r}}async searchForAmbassador(e,t){try{const a=await s.hi.get(`group/search-for-ambassador/${e}/${t}`);return a.data.data}catch(a){return a}}async createLeaderRequest(e){try{const t=await s.hi.post("/group/create-leader-request",e,{headers:{"Content-type":"multipart/form-data"}});return t.data.data}catch(t){return t}}async lastLeaderRequest(e){try{const t=await s.hi.get(`group/last-leader-request/${e}`);return t.data.data}catch(t){return t}}async deleteById(e){try{return await s.hi["delete"](`/group/delete/${e}`)}catch(t){return t}}async update(e){}async getGroupByType(e){try{const t=await s.hi.post("/group/GroupByType",{type_id:e});return t.data}catch(t){return t}}async userGroups(){try{const e=await s.hi.get("/group/user-groups");return e.data.data}catch(e){return e}}async statistics(e){try{const t=await s.hi.get(`group/statistics/${e}`);return t.data.data}catch(t){(0,i.F)(t,"statistics")}}async thesesAndScreensByWeek(e,t){try{const a=await s.hi.get(`group/theses-and-screens-by-week/${e}/${t}`);return a.data.data}catch(a){(0,r.S3)(a)}}async monthAchievement(e,t){try{const a=await s.hi.get(`group/month-achievement/${e}/${t}`);return a.data.data}catch(a){(0,r.S3)(a)}}}t["Z"]=new o},69897:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return we}});var r=a(66252),s=a(3577),i=a(92021);const o={key:0,class:"row"},n={class:"col-lg-12"},d={class:"d-flex align-items-center justify-content-between mb-3 flex-wrap"},u={class:"group-info d-flex align-items-center"},c=(0,r._)("div",{class:"me-3"},[(0,r._)("img",{class:"rounded-circle img-fluid avatar-100",src:i,alt:""})],-1),l={class:"info"},p={class:"mb-0"},m=(0,r._)("i",{class:"ri-lock-fill pe-2"},null,-1),g={class:"col-lg-4"},h={class:"card"},_=(0,r._)("div",{class:"card-header d-flex justify-content-between"},[(0,r._)("div",{class:"header-title"},[(0,r._)("h4",{class:"card-title"},"عن المجموعة")])],-1),y={class:"card-body"},v={class:"list-inline p-0 m-0"},w={class:"mb-3"},f={class:"mb-0"},b={class:"mb-3"},k={class:"d-flex"},x=(0,r._)("div",{class:"flex-shrink-0"},[(0,r._)("i",{class:"material-symbols-outlined"}," sticky_note_2 ")],-1),I={class:"flex-grow-1 ms-3"},$=(0,r._)("h4",null,"رسالة المجموعة المجموعة",-1),A={class:"mb-0",style:{"white-space":"pre-wrap",direction:"rtl"}},G={class:"d-flex"},q=(0,r._)("div",{class:"flex-shrink-0"},[(0,r._)("i",{class:"material-symbols-outlined"}," supervisor_account ")],-1),P={class:"flex-grow-1 ms-3"},j={key:0},D={key:1},z={key:2},B={key:3},L={class:"mb-0"},M={class:"mb-3"},O={class:"d-flex"},W=(0,r._)("div",{class:"flex-shrink-0"},[(0,r._)("i",{class:"material-symbols-outlined"},"trending_up")],-1),C={key:0,class:"flex-grow-1 ms-3"},E={class:"mb-0"},T={class:"card"},U=(0,r._)("div",{class:"card-header d-flex justify-content-between"},[(0,r._)("div",{class:"header-title"},[(0,r._)("h4",{class:"card-title"},"الوصول السريع")])],-1),S={class:"card-body row d-flex justify-content-center"},F={class:"col-lg-8"},Z={id:"post-modal-data",class:"card"},R={class:"card"},N={class:"card-body"};function H(e,t,a,i,H,J){const K=(0,r.up)("listMembers"),V=(0,r.up)("router-link"),Y=(0,r.up)("AddPost"),Q=(0,r.up)("LazyLoadedPosts");return H.group?((0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("div",n,[(0,r._)("div",d,[(0,r._)("div",u,[c,(0,r._)("div",l,[(0,r._)("h4",null,(0,s.zw)(H.group.name),1),(0,r._)("p",p,[m,(0,r.Uk)((0,s.zw)(H.group_type[H.group.type.type])+" . "+(0,s.zw)(H.group.user_ambassador_count)+" سفير ",1)])])]),(0,r.Wm)(K,{members:H.group.users,authInGroup:H.authInGroup},null,8,["members","authInGroup"])])]),(0,r._)("div",g,[(0,r._)("div",h,[_,(0,r._)("div",y,[(0,r._)("ul",v,[(0,r._)("li",w,[(0,r._)("h3",f,(0,s.zw)(H.group.name),1)]),(0,r._)("li",b,[(0,r._)("div",k,[x,(0,r._)("div",I,[$,(0,r._)("p",A,(0,s.zw)(H.group.description),1)])])]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(J.groupAdministrators,(e=>((0,r.wg)(),(0,r.iD)("li",{class:"mb-3",key:e.id},[(0,r._)("div",G,[q,(0,r._)("div",P,["leader"==e.pivot.user_type?((0,r.wg)(),(0,r.iD)("h4",j," قائد المجموعة ")):(0,r.kq)("",!0),"supervisor"==e.pivot.user_type?((0,r.wg)(),(0,r.iD)("h4",D," مراقب المجموعة ")):(0,r.kq)("",!0),"advisor"==e.pivot.user_type?((0,r.wg)(),(0,r.iD)("h4",z," موجه المجموعة ")):(0,r.kq)("",!0),"consultant"==e.pivot.user_type?((0,r.wg)(),(0,r.iD)("h4",B," مستشار المجموعة ")):(0,r.kq)("",!0),(0,r._)("p",L,(0,s.zw)(e.name),1)])])])))),128)),(0,r._)("li",M,[(0,r._)("div",O,[W,H.week_avg?((0,r.wg)(),(0,r.iD)("div",C,[(0,r._)("h4",null,(0,s.zw)(H.week_avg),1),(0,r._)("p",E,"معدل الأسبوع "+(0,s.zw)(H.week.title),1)])):(0,r.kq)("",!0)])])])])]),(0,r._)("div",T,[U,(0,r._)("div",S,[(0,r.Wm)(V,{to:{name:"group.group-statistics",params:{group_id:H.group_id}},class:"btn btn-primary d-block mt-3 col-5 me-1"},{default:(0,r.w5)((()=>[(0,r.Uk)("احصائيات المجموعة ")])),_:1},8,["to"]),(0,r.Wm)(V,{to:{name:"group.group-books",params:{group_id:H.group_id}},class:"btn btn-primary d-block mt-3 col-5 me-1"},{default:(0,r.w5)((()=>[(0,r.Uk)("كتب يقرؤها الأعضاء ")])),_:1},8,["to"]),H.authInGroup&&"ambassador"!=H.authInGroup.user_type?((0,r.wg)(),(0,r.j4)(V,{key:0,to:{name:"group.group-exceptions",params:{group_id:H.group_id}},class:"btn btn-primary d-block mt-3 col-5 me-1"},{default:(0,r.w5)((()=>[(0,r.Uk)("الاجازات")])),_:1},8,["to"])):(0,r.kq)("",!0),H.authInGroup&&"ambassador"!=H.authInGroup.user_type?((0,r.wg)(),(0,r.j4)(V,{key:1,to:{name:"group.ambassadors-reading",params:{group_id:H.group_id}},class:"btn btn-primary d-block mt-3 col-5 me-1"},{default:(0,r.w5)((()=>[(0,r.Uk)(" انجاز السفراء ")])),_:1},8,["to"])):(0,r.kq)("",!0),!H.authInGroup||"ambassador"==H.authInGroup.user_type||"supervising"!=H.group.type.type&&"advising"!=H.group.type.type?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(V,{key:2,to:{name:"group.auditMarks",params:{group_id:H.group_id}},class:"btn btn-primary d-block mt-3 col-5 me-1"},{default:(0,r.w5)((()=>[(0,r.Uk)(" تدقيق العلامات ")])),_:1},8,["to"])),H.authInGroup&&"ambassador"!=H.authInGroup.user_type?((0,r.wg)(),(0,r.j4)(V,{key:3,to:{name:"osboha.pendingPosts",params:{timeline_id:H.group.timeline_id}},class:"btn btn-primary d-block mt-3 col-5 me-1"},{default:(0,r.w5)((()=>[(0,r.Uk)(" المنشورات المعلقة ")])),_:1},8,["to"])):(0,r.kq)("",!0)])])]),(0,r._)("div",F,[(0,r._)("div",Z,[(0,r.Wm)(Y,{onAddPost:J.addPost,type:"normal",timeline_id:H.group.timeline_id},null,8,["onAddPost","timeline_id"])]),(0,r._)("div",R,[(0,r._)("div",N,[(0,r.Wm)(Q,{timeline_id:H.group.timeline_id,ref:"lazyLoadedPostsRef"},null,8,["timeline_id"])])])])])):(0,r.kq)("",!0)}a(57658);var J=a.p+"img/more_users.58a2ee71.png";const K={class:"group-member d-flex align-items-center mt-md-0 mt-3 w-100"},V={key:0,class:"iq-media-group me-3 col-6 d-flex align-items-center"},Y=(0,r._)("img",{src:J,alt:"profile-img",class:"img-fluid avatar-40 rounded-circle",title:"عرض الكل"},null,-1),Q={key:1,class:"iq-media-group me-3 col-6"},X=(0,r._)("p",null,"لا يوجد أعضاء",-1),ee=[X],te={key:2,class:"d-flex align-items-center mt-3 col-6"},ae=(0,r._)("span",{class:"align-middle material-symbols-outlined"}," settings ",-1),re=(0,r._)("span",null,"اعدادت المجموعة",-1),se=[ae,re],ie=(0,r._)("a",{role:"button",class:"dropdown-item d-flex align-items-center"},[(0,r._)("span",{class:"material-symbols-outlined me-2 md-18"}," diversity_1 "),(0,r.Uk)(" طلب سفراء ")],-1),oe=(0,r._)("a",{role:"button",class:"dropdown-item d-flex align-items-center"},[(0,r._)("span",{class:"material-symbols-outlined me-2 md-18"}," person_add "),(0,r.Uk)(" اضافه عضو ")],-1);function ne(e,t,a,i,o,n){const d=(0,r.up)("router-link"),u=(0,r.up)("BaseAvatar"),c=(0,r.Q2)("click-outside");return(0,r.wg)(),(0,r.iD)("div",K,[a.members.length>0?((0,r.wg)(),(0,r.iD)("div",V,[(0,r.Wm)(d,{class:"iq-media",to:{name:"group.group-members",params:{group_id:o.group_id}}},{default:(0,r.w5)((()=>[Y])),_:1},8,["to"]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.members.slice(0,5),(e=>((0,r.wg)(),(0,r.j4)(d,{class:"iq-media",key:e.id,to:{name:"user.profile",params:{user_id:e.id}}},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{profileImg:e.user_profile.profile_picture,profile_id:e.user_profile.id,title:e.name,gender:e.gender,avatarClass:"rounded-circle avatar-40 img-fluid"},null,8,["profileImg","profile_id","title","gender"])])),_:2},1032,["to"])))),128))])):((0,r.wg)(),(0,r.iD)("div",Q,ee)),a.authInGroup&&"ambassador"!=a.authInGroup.user_type?(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",te,[(0,r._)("div",{class:"d-inline-block w-100 text-center",onClick:t[0]||(t[0]=e=>o.show=!o.show),role:"button"},se),(0,r._)("div",{class:(0,s.C_)("dropdown-menu dropdown-menu-right "+(o.show?"show":"")),"aria-labelledby":"dropdownMenuButton",style:{}},[(0,r.Wm)(d,{to:{name:"group.requestAmbassadors",params:{group_id:o.group_id}}},{default:(0,r.w5)((()=>[ie])),_:1},8,["to"]),(0,r.Wm)(d,{to:{name:"group.addMemeber",params:{group_id:o.group_id}}},{default:(0,r.w5)((()=>[oe])),_:1},8,["to"])],2)])),[[c,n.onClickOutside]]):(0,r.kq)("",!0)])}a(2933);var de=a(20425),ue=a.n(de),ce={name:"card",directives:{clickOutside:ue().directive},props:{members:{type:[Object],required:!0},authInGroup:{type:[Object],required:!0}},data(){return{show:!1,group_id:this.$route.params.group_id}},methods:{onClickOutside(){this.show=!1}}},le=a(83744);const pe=(0,le.Z)(ce,[["render",ne]]);var me=pe,ge=a(44883),he=a(1425),_e=a(22658),ye={name:"Group-detail",components:{listMembers:me,AddPost:ge.Z,LazyLoadedPosts:he.Z},async created(){try{const e=await _e.Z.getById(this.group_id);this.group=e.info,this.week_avg=(Math.round(100*e.week_avg)/100).toFixed(2),this.week=e.week,this.authInGroup=e.authInGroup}catch(e){console.log(e)}},data(){return{group:null,group_id:this.$route.params.group_id,week:null,week_avg:0,authInGroup:null,group_type:{followup:"فريق متابعة",supervising:"فريق رقابة",advising:"فريق توجيه",consultation:"فريق الاستشارة",Administration:"الإدارة العليا"},reasons:[],roles:{admin:0,consultant:1,advisor:2,supervisor:3,leader:4,ambassador:5}}},computed:{groupAdministrators(){let e=this.group.group_administrators.filter((e=>"admin"!=e.pivot.user_type));return e.sort(((e,t)=>this.roles[e.pivot.user_type]-this.roles[t.pivot.user_type]))}},methods:{back(){this.$router.push({name:"group.group-detail",params:{group_id:this.group_id}})},addPost(e){this.$refs.lazyLoadedPostsRef.addNewPost(e)}}};const ve=(0,le.Z)(ye,[["render",H]]);var we=ve},92021:function(e,t,a){"use strict";e.exports=a.p+"img/current_book.4d2ae03c.png"}}]);
//# sourceMappingURL=4406.1290f7d9.js.map